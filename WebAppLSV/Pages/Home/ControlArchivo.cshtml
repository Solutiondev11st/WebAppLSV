@page
@model WebAppLSV.Pages.Home.ControlArchivoModel

@{
    ViewBag.Title = "WebAPP Liseo Santa Verónica";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Archivos de Pagos</h2>

<form method="post" role="form" class="form-horizontal">
    @Html.AntiForgeryToken()

    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal"><span class="glyphicon glyphicon-upload"></span> Cargar Archivo..</button>

    <!-- Modal -->
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Seleccionar Archivo</h4>
                </div>
                <div class="modal-body">

                    <input type="file" accept=".xls,xlsx" class="form-control" lang="es-ES" />
                    

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary">Cargar Archivo</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                </div>
            </div>

        </div>
    </div>


    <table class="table">
        <thead>
            <tr>
                <th>Nombre Archivo</th>
                <th>Estado del Archvio</th>
                <th>Fechar de Carga</th>
                <th>Fecha de Proceso</th>
                <th>Usuario</th>
                <th>Operaciones</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Controlarchivo)
            {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Nombre)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Estado)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.FechaCargar)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.FechaProceso);
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Usuario)
                </td>

                @{
                    if (item.Estado.ToString() == "Cargado")
                    {
                <td>
                    <a asp-page="./Eliminar" asp-route-id="@item.Id"><span class="glyphicon glyphicon-remove"></span></a>
                    <a asp-page="./Procesar" asp-route-id="@item.Id"><span class="glyphicon glyphicon-refresh"></span></a>
                    <!--
                    <button type="button" class="btn btn-primary btn-sm"> <span class="glyphicon glyphicon-remove"></span></button>
                    <button type="button" class="btn btn-primary btn-sm"> <span class="glyphicon glyphicon-refresh"></span></button>
                    -->
                </td>
                    }
                    else
                    {
                        <td>
                            
                            <a asp-page="#"><span class="glyphicon glyphicon-ok"></span></a>
                        </td>
                    }

                }
                        
            </tr>
            }
        </tbody>
    </table>
</form>